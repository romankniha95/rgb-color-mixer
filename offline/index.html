<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>RGB Color Mixer (Offline)</title>
  <meta name="description" content="Offline single-file RGB color mixer">
  <style>
:root{--muted:#9aa4b2;--accent:#3b82f6;--bg:linear-gradient(180deg,#e6eefc 0%, #f7f8fb 100%);--surface:#fff;--text:#0f1724;--panel-shadow:0 8px 20px rgba(16,32,58,0.04);--topbar-bg:linear-gradient(90deg,#ffffff,#f8fafc);--topbar-border:#edf2f7}
  [data-theme="dark"]{--bg:linear-gradient(180deg,#071025 0%, #071726 100%);--surface:#071226;--text:#e6eefc;--panel-shadow:0 10px 30px rgba(2,6,23,0.6);--topbar-bg:linear-gradient(90deg,#071226,#0b1524);--topbar-border:rgba(255,255,255,0.04);--accent:#60a5fa}
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,Arial;margin:0;min-height:100vh;background:var(--bg);color:var(--text)}
  .topbar{width:100%;background:var(--topbar-bg);border-bottom:1px solid var(--topbar-border);backdrop-filter:blur(6px)}
  .topbar-inner{max-width:820px;margin:0 auto;padding:10px 18px;display:flex;align-items:center;justify-content:space-between}
  .topbar h1{margin:0;font-size:18px;font-weight:700}
  .theme-toggle{appearance:none;border:0;padding:8px;border-radius:10px;cursor:pointer;background:rgba(16,24,40,0.04);color:var(--text)}
  .content{max-width:820px;margin:18px auto;display:flex;flex-direction:column;align-items:center;gap:18px;padding:0 14px}
  .panel{width:100%;background:var(--surface);border-radius:12px;padding:18px;box-shadow:var(--panel-shadow)}
  .app-panel{display:flex;flex-direction:column;align-items:center;gap:14px;padding:22px}
  .blank-panel{min-height:120px;display:flex;align-items:center;justify-content:center;color:var(--muted)}
  .app-inner{--track-width:440px;--col-icon:28px;--col-label:68px;--col-num:64px;width:100%;max-width:980px;margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:14px}
  .color-display{width:var(--track-width);height:220px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:18px;color:#fff;cursor:pointer;position:relative;transition:transform .18s ease, box-shadow .18s ease, background-color .12s ease;box-shadow: var(--display-glow, 0 10px 30px rgba(2,6,23,0.28)), 0 6px 18px rgba(16,32,58,0.08)}
  .display-mode { margin: 12px 0 18px 0; display: inline-flex; gap: 8px; background: transparent; border-radius: 999px; }
  .mode-btn {
    padding: 10px 18px;
    font-weight: 600;
    font-size: 14px;
    border-radius: 8px;
    background-color: var(--accent);
    color: #ffffff;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
  }

  .mode-btn:hover {
    transform: translateY(-2px);
  }

  .mode-btn[aria-pressed="true"] {
    background-color: var(--muted);
  }

  .mode-btn:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(100, 150, 255, 0.08);
  }

  .color-main{font-family:monospace;font-weight:800;font-size:18px;letter-spacing:0.6px}
  .channel-list{display:flex;gap:10px;margin-top:8px}
  .channel-item{font-family:monospace;font-size:12px;padding:6px 8px;border-radius:8px;background:rgba(0,0,0,0.06);color:inherit;font-weight:700}
  .channel-item.r{background:linear-gradient(90deg, rgba(239,68,68,0.12), rgba(239,68,68,0.04))}
  .channel-item.g{background:linear-gradient(90deg, rgba(34,197,94,0.10), rgba(34,197,94,0.04))}
  .channel-item.b{background:linear-gradient(90deg, rgba(59,130,246,0.10), rgba(59,130,246,0.04))}
  .sliders{display:flex;flex-direction:column;gap:18px;padding:0;width:var(--track-width);max-width:100%;margin:0 auto}

  .slider-row{position:relative;min-height:52px}
  .icon{width:18px;height:18px;position:absolute;left:calc(-1 * (var(--col-label) + var(--col-icon) + 12px));top:50%;transform:translateY(-50%)}
  .slider-row label{position:absolute;left:calc(-1 * (var(--col-label) + 6px));top:50%;transform:translateY(-50%);display:block;font-weight:600;color:var(--text);line-height:1}
  .slider{position:absolute;left:0;top:50%;transform:translateY(-50%);width:100%;appearance:none;height:8px;border-radius:999px;background:linear-gradient(90deg,#ddd,#bbb);outline:none}
  .slider::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent);box-shadow:var(--thumb-shadow, 0 2px 6px rgba(59,130,246,0.28));cursor:pointer;transition:box-shadow .22s ease, transform .08s ease}
  .slider.red::-webkit-slider-thumb{background:#ef4444}
  .slider.green::-webkit-slider-thumb{background:#22c55e}
  .slider.blue::-webkit-slider-thumb{background:#3b82f6}
  .slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--accent);border:none;box-shadow:var(--thumb-shadow, 0 2px 6px rgba(59,130,246,0.28));transition:box-shadow .22s ease, transform .08s ease}
  .slider.red::-moz-range-thumb{background:#ef4444}
  .slider.green::-moz-range-thumb{background:#22c55e}
  .slider.blue::-moz-range-thumb{background:#3b82f6}
  .num{position:absolute;left:calc(100% + 12px);top:50%;transform:translateY(-50%);width:var(--col-num);height:36px;padding:0 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:var(--surface);text-align:right;font-weight:600;color:var(--text);display:flex;align-items:center;justify-content:flex-end}
  .hint{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
  .color-display::after{content:'';position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;pointer-events:none;background: linear-gradient(180deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.04) 22%, rgba(255,255,255,0.00) 60%);mix-blend-mode: overlay;opacity:0.95}
  .icon-sun, .icon-moon{display:block;transition:transform .18s ease,opacity .18s ease,filter .18s ease}
  .icon-sun{opacity:1;transform:scale(1.06);filter:none}
  .icon-moon{opacity:.45;transform:scale(.96);filter:grayscale(60%)}
  [data-theme="dark"] .icon-sun{opacity:.45;transform:scale(.96);filter:grayscale(60%)}
  [data-theme="dark"] .icon-moon{opacity:1;transform:scale(1.06);filter:none}

  /* Moon outline in light theme, filled in dark theme */
  .icon-moon path{transition:fill .18s ease,stroke .18s ease}
  .icon-moon path{fill:none;stroke:currentColor;stroke-width:1.4;stroke-linecap:round;stroke-linejoin:round}
  [data-theme="dark"] .icon-moon path{fill:currentColor;stroke:none}
  [data-theme="dark"] .theme-toggle{background:rgba(255,255,255,0.06);color:var(--text)}
  @media(min-width:900px){.content{display:grid;grid-template-columns:1fr;gap:20px}}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <h1>RGB Color Mixer</h1>
      <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme" title="Prepni tmavý režim">
        <svg class="icon-sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="12" cy="12" r="4" fill="currentColor" />
          <g stroke="currentColor" stroke-width="1.4" stroke-linecap="round">
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
          </g>
        </svg>
        <svg class="icon-moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </header>
  <main class="content">
    <div class="panel app-panel">
      <div class="app-inner">
        <div class="color-display" id="colorDisplay">#808080</div>
        <div class="display-mode" role="tablist" aria-label="Display mode">
          <button class="mode-btn" data-mode="hex" aria-pressed="true">HEX</button>
          <button class="mode-btn" data-mode="rgb" aria-pressed="false">RGB</button>
        </div>
        <div class="sliders">
        <div class="slider-row">
          <svg class="icon" viewBox="0 0 24 24" width="18" height="18"><circle cx="12" cy="12" r="10" fill="#ef4444"/></svg>
          <label for="red">Red</label>
          <input class="slider red" id="red" type="range" min="0" max="255" value="128">
          <input class="num" id="redNum" type="text" inputmode="numeric" value="128">
        </div>
        <div class="slider-row">
          <svg class="icon" viewBox="0 0 24 24" width="18" height="18"><circle cx="12" cy="12" r="10" fill="#22c55e"/></svg>
          <label for="green">Green</label>
          <input class="slider green" id="green" type="range" min="0" max="255" value="128">
          <input class="num" id="greenNum" type="text" inputmode="numeric" value="128">
        </div>
        <div class="slider-row">
          <svg class="icon" viewBox="0 0 24 24" width="18" height="18"><circle cx="12" cy="12" r="10" fill="#3b82f6"/></svg>
          <label for="blue">Blue</label>
          <input class="slider blue" id="blue" type="range" min="0" max="255" value="128">
          <input class="num" id="blueNum" type="text" inputmode="numeric" value="128">
        </div>
        </div>
        <p class="hint">Posuň posuvníky alebo zadaj hodnotu číslom; kliknutím na plochu skopíruješ HEX.</p>
      </div>
    </div>

    <div class="panel blank-panel" id="blankPanel">
      <!-- Čisté okno pripravené na ďalší obsah -->
    </div>
  </main>

  <script>
  (function(){
  const red = document.getElementById('red');
  const green = document.getElementById('green');
  const blue = document.getElementById('blue');
  const redNum = document.getElementById('redNum');
  const greenNum = document.getElementById('greenNum');
  const blueNum = document.getElementById('blueNum');
  const colorDisplay = document.getElementById('colorDisplay');
  const modeButtons = document.querySelectorAll('.mode-btn');

  function getDisplayMode(){
    return localStorage.getItem('rgb-display-mode') || 'hex';
  }

  function componentToHex(c){ const hex = Number(c).toString(16); return hex.length===1? '0'+hex: hex }
  function rgbToHex(r,g,b){ return '#'+componentToHex(r)+componentToHex(g)+componentToHex(b) }
  function luminance(r,g,b){ return (0.299*r + 0.587*g + 0.114*b) }
  function clamp(v){ if(Number.isNaN(v)) return 0; return Math.min(255, Math.max(0, Math.round(v))) }

  function updateColor(){
    const r = clamp(Number(red.value));
    const g = clamp(Number(green.value));
    const b = clamp(Number(blue.value));
    const rgb = 'rgb('+r+','+g+','+b+')';
    const hex = rgbToHex(r,g,b).toUpperCase();
    colorDisplay.style.backgroundColor = rgb;
    const mode = getDisplayMode();
    if(mode === 'rgb'){
      colorDisplay.textContent = rgb;
    } else {
      colorDisplay.textContent = hex;
    }
    // update small inputs according to mode
    function setNumDisplay(el, dec){
      const m = getDisplayMode();
      if(m === 'rgb') el.value = String(dec);
      else el.value = componentToHex(dec).toUpperCase();
    }
    setNumDisplay(redNum, r);
    setNumDisplay(greenNum, g);
    setNumDisplay(blueNum, b);
    colorDisplay.style.color = luminance(r,g,b) > 180 ? '#0b1220' : '#ffffff';
    // update slider visual fills
    updateRangeBackground(red, '#ef4444');
    updateRangeBackground(green, '#22c55e');
    updateRangeBackground(blue, '#3b82f6');
  }

  red.addEventListener('input', ()=>{ updateColor(); updateRangeBackground(red, '#ef4444'); });
  green.addEventListener('input', ()=>{ updateColor(); updateRangeBackground(green, '#22c55e'); });
  blue.addEventListener('input', ()=>{ updateColor(); updateRangeBackground(blue, '#3b82f6'); });

  function parseAndSetFromInput(el, slider){
    const mode = getDisplayMode();
    let v = 0;
    const raw = (el.value || '').toString().trim();
    if(mode === 'rgb'){
      v = clamp(Number(raw.replace(/[^0-9-]/g, '')));
    } else {
      const h = raw.replace(/[^0-9a-fA-F]/g, '');
      if(h.length === 0) v = 0;
      else v = clamp(parseInt(h.slice(0,2), 16));
    }
    slider.value = v;
    updateColor();
  }

  redNum.addEventListener('input', ()=> parseAndSetFromInput(redNum, red));
  greenNum.addEventListener('input', ()=> parseAndSetFromInput(greenNum, green));
  blueNum.addEventListener('input', ()=> parseAndSetFromInput(blueNum, blue));

  colorDisplay.addEventListener('click', function(){ const toCopy = colorDisplay.textContent; try{ navigator.clipboard.writeText(toCopy); const old = colorDisplay.textContent; colorDisplay.textContent='Skopírované!'; setTimeout(()=> colorDisplay.textContent = old,800) }catch(e){}
  });

  function updateRangeBackground(rangeEl, color){
    const min = Number(rangeEl.min) || 0;
    const max = Number(rangeEl.max) || 100;
    const val = Number(rangeEl.value);
    const pct = Math.round(((val - min) / (max - min)) * 100);

    function hexToRgb(h){ const hex = h.replace('#',''); const bigint = parseInt(hex,16); return { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 }; }
    function rgbToHexStr(r,g,b){ const toHex = v => v.toString(16).padStart(2,'0'); return `#${toHex(r)}${toHex(g)}${toHex(b)}`; }
    function mixWithWhite(hex, factor){ const c = hexToRgb(hex); const r = Math.round(c.r + (255 - c.r) * factor); const g = Math.round(c.g + (255 - c.g) * factor); const b = Math.round(c.b + (255 - c.b) * factor); return rgbToHexStr(r,g,b); }

    const endHex = color;
    const pNorm = Math.max(0, Math.min(1, (val - min) / (max - min)));
    const startHex = mixWithWhite(endHex, 1 - pNorm);
    rangeEl.style.background = `linear-gradient(90deg, ${startHex} 0%, ${endHex} ${pct}%, #d9d9d9 ${pct}%)`;

    const ec = hexToRgb(endHex);
    // stronger layered halo: three layered shadows for a richer glow
    const shadow = `0 6px 12px rgba(${ec.r}, ${ec.g}, ${ec.b}, 0.30), 0 14px 28px rgba(${ec.r}, ${ec.g}, ${ec.b}, 0.22), 0 26px 56px rgba(${ec.r}, ${ec.g}, ${ec.b}, 0.12)`;
    rangeEl.style.setProperty('--thumb-shadow', shadow);
  }

  updateColor();
  // initialize display-mode buttons
  if(modeButtons && modeButtons.length){
    const stored = getDisplayMode();
    modeButtons.forEach(b => b.setAttribute('aria-pressed', String(b.dataset.mode === stored)));
    modeButtons.forEach(b => b.addEventListener('click', ()=>{
      const m = b.dataset.mode;
      localStorage.setItem('rgb-display-mode', m);
      modeButtons.forEach(x => x.setAttribute('aria-pressed', String(x === b)));
      updateColor();
    }));
  }
  
  // theme toggle for offline page
  const themeToggle = document.getElementById('themeToggle');
  function applyTheme(t){ if(t==='dark') document.documentElement.setAttribute('data-theme','dark'); else document.documentElement.removeAttribute('data-theme'); }
  const stored = localStorage.getItem('rgb-theme');
  if(stored) {
    applyTheme(stored);
    if(themeToggle) themeToggle.setAttribute('aria-pressed', String(stored === 'dark'));
  } else {
    // default to dark when no stored preference
    applyTheme('dark');
    if(themeToggle) themeToggle.setAttribute('aria-pressed', 'true');
  }
  if(themeToggle){ themeToggle.addEventListener('click', ()=>{ const isDark = document.documentElement.getAttribute('data-theme')==='dark'; const next = isDark ? 'light' : 'dark'; applyTheme(next==='dark'? 'dark' : null); localStorage.setItem('rgb-theme', next); themeToggle.setAttribute('aria-pressed', String(next === 'dark')); }); }
})();
  </script>
</body>
</html>
