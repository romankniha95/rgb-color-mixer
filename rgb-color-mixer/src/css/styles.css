:root{
    /* light theme (default) */
    --bg-page: linear-gradient(180deg,#e6eefc 0%, #f7f8fb 100%);
    --surface: #ffffff;
    --text: #0f1724;
    --muted: #6b7280;
    --accent: #3b82f6;
    --panel-shadow: 0 8px 20px rgba(16,32,58,0.04);
    --topbar-bg: linear-gradient(90deg,#ffffff,#f8fafc);
    --topbar-border: #edf2f7;
}

[data-theme="dark"]{
    --bg-page: linear-gradient(180deg,#071025 0%, #071726 100%);
    --surface: #071226;
    --text: #e6eefc;
    --muted: #94a3b8;
    --accent: #60a5fa;
    --panel-shadow: 0 10px 30px rgba(2,6,23,0.6);
    --topbar-bg: linear-gradient(90deg,#071226,#0b1524);
    --topbar-border: rgba(255,255,255,0.04);
}

*{box-sizing:border-box}
body{
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    margin:0;
    padding:0;
    min-height:100vh;
    background: var(--bg-page);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
}

/* Top bar */
.topbar{width:100%;background:var(--topbar-bg);border-bottom:1px solid var(--topbar-border);backdrop-filter: blur(6px);}
.topbar-inner{max-width:920px;margin:0 auto;padding:10px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
.topbar h1{margin:0;font-size:18px;color:var(--text);font-weight:700}
.theme-toggle{appearance:none;border:0;background:transparent;color:var(--text);padding:8px;border-radius:10px;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
.theme-toggle svg{width:18px;height:18px;transition:transform .18s ease}
.theme-toggle:hover{transform:translateY(-2px)}

/* subtle hover glow for topbar */
.topbar:hover{box-shadow:0 8px 30px rgba(59,130,246,0.06);transform:translateY(0);transition:box-shadow .18s ease}

/* Main content centers two stacked panels */
.content{max-width:820px;margin:18px auto;display:flex;flex-direction:column;align-items:center;gap:18px;padding:0 14px}
.panel{width:100%;background:var(--surface);border-radius:12px;padding:18px;box-shadow:var(--panel-shadow)}
.app-panel{display:flex;flex-direction:column;align-items:center;gap:14px;padding:22px}
.blank-panel{min-height:120px;display:flex;align-items:center;justify-content:center;color:var(--muted)}

/* App inner wrapper with shared track width so color box and slider track align */
.app-inner{--track-width:440px;--col-icon:28px;--col-label:68px;--col-num:64px;width:100%;max-width:980px;margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:14px}

.color-display{
    width:var(--track-width);
    height:220px;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:600;
    font-size:20px;
    color:#fff;
    cursor:pointer;
    position:relative;
    transition:transform .18s ease, box-shadow .18s ease, background-color .12s ease;

.display-mode {
    margin: 12px 0 18px 0;
    display: inline-flex;
    gap: 8px;
    background: transparent;
    border-radius: 999px;
}

.mode-btn {
    padding: 10px 18px;
    font-weight: 600;
    font-size: 14px;
    border-radius: 8px;
    background-color: var(--accent);
    color: #ffffff;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
}

.mode-btn:hover {
    transform: translateY(-2px);
}

.mode-btn[aria-pressed="true"] {
    background-color: var(--muted);
}

.mode-btn:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(100, 150, 255, 0.08);
}



/* color display content layout */
.color-main{font-family:var(--font-family-mono);font-weight:800;font-size:18px;letter-spacing:0.6px}
.channel-list{display:flex;gap:10px;margin-top:8px}
.channel-item{font-family:var(--font-family-mono);font-size:12px;padding:6px 8px;border-radius:8px;background:rgba(0,0,0,0.06);color:inherit;font-weight:700}
.channel-item.r{background:linear-gradient(90deg, rgba(239,68,68,0.12), rgba(239,68,68,0.04))}
.channel-item.g{background:linear-gradient(90deg, rgba(34,197,94,0.10), rgba(34,197,94,0.04))}
.channel-item.b{background:linear-gradient(90deg, rgba(59,130,246,0.10), rgba(59,130,246,0.04))}

@media (max-width:520px){
    .color-main{font-size:16px}
    .channel-item{font-size:11px;padding:5px 6px}
}
    /* layered base shadow plus optional dynamic colored glow from JS (--display-glow) */
    box-shadow: var(--display-glow, 0 10px 30px rgba(2,6,23,0.28)), 0 6px 18px rgba(16,32,58,0.08);
}

.color-display::after{
    content:'';
    position:absolute;
    left:0;top:0;right:0;bottom:0;
    border-radius:inherit;
    pointer-events:none;
    /* soft glossy sheen */
    background: linear-gradient(180deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.04) 22%, rgba(255,255,255,0.00) 60%);
    mix-blend-mode: overlay;
    opacity:0.95;
}

.color-display:active{transform:scale(.98)}


.sliders{display:flex;flex-direction:column;gap:18px;padding:0;width:var(--track-width);max-width:100%;margin:0 auto}

.slider-row{position:relative;min-height:52px}
.icon{width:18px;height:18px;position:absolute;left:calc(-1 * (var(--col-label) + var(--col-icon) + 12px));top:50%;transform:translateY(-50%)}
.slider-row label{position:absolute;left:calc(-1 * (var(--col-label) + 6px));top:50%;transform:translateY(-50%);display:block;font-weight:600;color:var(--text);line-height:1}
.slider{position:absolute;left:0;top:50%;transform:translateY(-50%);width:100%;appearance:none;height:8px;border-radius:999px;background:linear-gradient(90deg,#ddd,#bbb);outline:none}
.slider::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent);box-shadow:var(--thumb-shadow, 0 2px 6px rgba(59,130,246,0.28));cursor:pointer;transition:box-shadow .22s ease, transform .08s ease}
.slider.red::-webkit-slider-thumb{background:#ef4444}
.slider.green::-webkit-slider-thumb{background:#22c55e}
.slider.blue::-webkit-slider-thumb{background:#3b82f6}

/* Firefox thumbs */
.slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--accent);border:none;box-shadow:var(--thumb-shadow, 0 2px 6px rgba(59,130,246,0.28));transition:box-shadow .22s ease, transform .08s ease}
.slider.red::-moz-range-thumb{background:#ef4444}
.slider.green::-moz-range-thumb{background:#22c55e}
.slider.blue::-moz-range-thumb{background:#3b82f6}
.num{position:absolute;left:calc(100% + 12px);top:50%;transform:translateY(-50%);width:var(--col-num);height:36px;padding:0 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:var(--surface);text-align:right;font-weight:600;color:var(--text);display:flex;align-items:center;justify-content:flex-end}
.hint{margin-top:8px;color:var(--muted);font-size:13px;text-align:center}

/* App inner wrapper to keep color-display and sliders aligned */
/* (app-inner already defined above) */

/* Sun / Moon icon states */
.icon-sun, .icon-moon{position:relative;display:block;transition:transform .18s ease,opacity .18s ease,filter .18s ease}
/* default (light) appearance: sun emphasized, moon dimmed */
.icon-sun{opacity:1;transform:scale(1.06);filter:none}
.icon-moon{opacity:.45;transform:scale(.96);filter:grayscale(60%)}

/* dark theme: moon emphasized, sun dimmed */
[data-theme="dark"] .icon-sun{opacity:.45;transform:scale(.96);filter:grayscale(60%)}
[data-theme="dark"] .icon-moon{opacity:1;transform:scale(1.06);filter:none}

/* Moon outline in light theme, filled in dark theme */
.icon-moon path{transition:fill .18s ease,stroke .18s ease}
.icon-moon path{fill:none;stroke:currentColor;stroke-width:1.4;stroke-linecap:round;stroke-linejoin:round}
[data-theme="dark"] .icon-moon path{fill:currentColor;stroke:none}

.theme-toggle{background:rgba(16,24,40,0.04);color:var(--text)}
[data-theme="dark"] .theme-toggle{background:rgba(255,255,255,0.06);color:var(--text)}

@media (min-width:900px){
    .content{display:grid;grid-template-columns:1fr;gap:20px}
}

/* Mobile responsiveness */
@media (max-width:768px){
    .app-inner{--track-width:320px;--col-icon:24px;--col-label:50px;--col-num:56px}
    .color-display{width:var(--track-width);height:180px;font-size:16px}
    .sliders{gap:14px}
    .slider-row{min-height:44px}
    .icon{width:16px;height:16px;left:calc(-1 * (var(--col-label) + var(--col-icon) + 8px))}
    .slider-row label{left:calc(-1 * (var(--col-label) + 2px));font-size:14px}
    .num{left:calc(100% + 8px);width:var(--col-num);font-size:14px}
}

@media (max-width:480px){
    .app-inner{--track-width:280px}
    .color-display{width:var(--track-width);height:160px;font-size:14px}
    .topbar-inner{padding:8px 12px}
    .topbar h1{font-size:16px}
    .content{margin:12px auto;padding:0 10px}
    .panel{padding:14px}
    .app-panel{padding:16px}
}

/* Very small screens */
@media (max-width:360px){
    .app-inner{--track-width:240px;--col-label:45px;--col-num:50px}
    .color-display{height:140px;font-size:12px}
    .slider-row{min-height:40px}
    .icon{width:14px;height:14px}
    .slider-row label{font-size:13px}
    .num{font-size:13px}
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    .slider-row{min-height:56px}
    .slider::-webkit-slider-thumb{width:22px;height:22px}
    .slider::-moz-range-thumb{width:22px;height:22px}
    .num{height:40px}
    .color-display:active{transform:scale(0.96)}
    .mode-btn{min-height:44px;padding:12px 16px}
    .ai-button{min-height:44px;padding:12px 20px}
}

/* Landscape mobile */
@media (max-width:768px) and (orientation: landscape){
    .app-inner{--track-width:280px}
    .color-display{height:140px}
    .topbar-inner{padding:6px 12px}
    .content{margin:8px auto}
}

/* AI Assistant styles */
.ai-assistant {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    width: 100%;
}

.ai-button {
    margin-bottom: 8px;
}

.ai-loading {
    margin-top: -8px;
}

.ai-assistant h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
}

.ai-button {
    padding: 10px 18px;
    font-weight: 600;
    font-size: 14px;
    border-radius: 8px;
    background-color: var(--accent);
    color: #ffffff;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
}

.ai-button:hover {
    transform: translateY(-2px);
}

.ai-button:disabled {
    background-color: var(--muted);
    cursor: not-allowed;
}

.ai-response {
    margin-top: 10px;
    padding: 14px;
    border-radius: 8px;
    background: transparent;
    color: var(--text);
    width: 100%;
    min-height: 50px;
    white-space: pre-wrap;
    font-size: 14px;
    line-height: 1.5;
}



.ai-loading {
    display: flex;
    flex-direction: column;
    gap: 4px;
    height: auto;
}

.bar {
    width: 50px;
    height: 6px;
    border-radius: 3px;
    transform-origin: left;
}

.red-bar {
    background: #ef4444;
    animation: pulse 1.2s ease-in-out infinite;
}

.green-bar {
    background: #22c55e;
    animation: pulse 1.2s ease-in-out infinite;
    animation-delay: 0.2s;
}

.blue-bar {
    background: #3b82f6;
    animation: pulse 1.2s ease-in-out infinite;
    animation-delay: 0.4s;
}

@keyframes pulse {
    0%, 100% {
        transform: scaleX(0.3);
    }
    50% {
        transform: scaleX(1);
    }
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}
